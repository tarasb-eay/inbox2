
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Mail Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light Gray background */
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        #app-container {
            width: 100%;
            max-width: 420px; /* Standard mobile width */
            min-height: 100vh;
            background-color: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Stronger shadow */
            position: relative;
            overflow-x: hidden;
            border-radius: 12px; /* Rounded corners for the app container */
        }
        .email-item {
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
            border-left: 5px solid transparent;
            margin-bottom: 8px; /* Spacing between cards */
            border-radius: 8px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05); /* Subtle inner shadow */
        }
        .email-item:hover {
            background-color: #eff6ff; /* Light blue hover effect */
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .unread-item {
            border-left: 5px solid #f97316; /* Vibrant Orange-600 for unread indicator */
        }
        .tab-button {
            transition: color 0.2s, border-bottom 0.2s;
        }
        .tab-active {
            color: #4f46e5; /* Indigo-600 */
            border-bottom: 3px solid #4f46e5;
            font-weight: 700;
        }
        .fixed-cta-section {
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
        }
        /* Custom form styling */
        .input-field {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
        }
        .input-field:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3);
        }
        .sender-avatar {
            min-width: 40px;
        }
        /* CTA Button Styling with Gradient */
        #cta-button {
            background-image: linear-gradient(to right, #ef4444, #dc2626); /* Red Gradient */
            transition: background-image 0.3s ease, transform 0.1s ease;
            box-shadow: 0 10px 20px -5px rgba(239, 68, 68, 0.5); /* Red shadow glow */
        }
        #cta-button:hover:not(:disabled) {
            background-image: linear-gradient(to right, #dc2626, #ef4444);
            transform: translateY(-2px);
        }
        #cta-button:disabled {
            box-shadow: none;
        }
    </style>
</head>
<body>

<div id="app-container">
    <!-- Header with Tabs -->
    <header class="sticky top-0 z-20 bg-white shadow-xl">
        <!-- Top Bar -->
        <div id="top-bar" class="p-4 flex justify-between items-center bg-indigo-600 transition-colors duration-300 rounded-t-xl">
            <button id="back-button" class="hidden p-1 rounded-full text-white hover:bg-indigo-500 transition duration-150">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            </button>
            <h1 id="header-title" class="text-xl font-extrabold text-white">Inbox</h1>
            <div id="profile-icon" class="w-8 h-8 bg-white rounded-full flex items-center justify-center text-indigo-600 text-sm font-semibold cursor-pointer shadow-md">A</div>
        </div>

        <!-- Tabs Navigation -->
        <nav id="tabs-navigation" class="flex justify-around border-b border-gray-200 bg-white">
            <button class="tab-button py-3 text-sm font-medium text-gray-500 w-1/3" data-tab="inbox" onclick="setCurrentTab('inbox')">All</button>
            <button class="tab-button py-3 text-sm font-medium text-gray-500 w-1/3" data-tab="promotions" onclick="setCurrentTab('promotions')">Promotions</button>
            <button class="tab-button py-3 text-sm font-medium text-gray-500 w-1/3" data-tab="spam" onclick="setCurrentTab('spam')">Spam</button>
        </nav>
    </header>

    <!-- Inbox View -->
    <div id="inbox-view" class="p-4 pt-2">
        <!-- List of Emails will be rendered here -->
    </div>

    <!-- Detail View -->
    <div id="detail-view" class="p-4 hidden h-full overflow-y-auto pb-20">
        <div class="flex items-center mb-6 border-b pb-4 border-gray-100">
            <img id="detail-logo" class="w-12 h-12 rounded-full mr-4 object-cover shadow-lg" src="" alt="Sender Logo">
            <div>
                <p class="text-xs text-gray-500 uppercase tracking-wider">From:</p>
                <p id="detail-sender" class="font-bold text-gray-800 text-lg"></p>
            </div>
        </div>
        
        <h2 id="detail-subject" class="text-2xl font-extrabold mb-4 text-gray-900 leading-snug"></h2>
        
        <div id="detail-content" class="text-gray-700 leading-relaxed mb-8 bg-gray-50 p-5 rounded-xl border border-gray-200">
            <!-- Content will be rendered here -->
        </div>

        <!-- Call to Action Section -->
        <div id="cta-section" class="fixed bottom-0 fixed-cta-section bg-white p-4 shadow-[0_-5px_20px_rgba(0,0,0,0.15)] border-t border-gray-100 transition-opacity duration-300">
             <button id="cta-button"
                    class="w-full text-white font-extrabold py-3 rounded-xl shadow-xl hover:shadow-2xl transition duration-300 uppercase tracking-widest disabled:bg-gray-400 disabled:shadow-none"
                    onclick="claimOffer()">
                Claim Your Sample!
            </button>
            <p id="cta-info" class="text-xs text-center mt-3 text-red-500 font-semibold">Warning: Proceeding may lead to unexpected consequences.</p>
        </div>
    </div>

    <!-- Modal Overlay for Form and Success -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden" onclick="closeModal()">
        <div id="modal-content" class="bg-white p-8 rounded-3xl shadow-3xl max-w-sm w-full text-center transform transition-all duration-300 scale-100" onclick="event.stopPropagation()">
            <!-- Dynamic content (Form or Success Message) will be loaded here -->
        </div>
    </div>

</div>

<script>
    // Global state
    let currentView = 'inbox';
    let currentTab = 'spam'; // Default tab view
    let selectedEmailId = null;

    // Email Data with Categories (Updated: Apple moved to the 6th spam position)
    const allEmails = [
        // Inbox (Simulated Friends/Regular)
        { id: 1, category: "inbox", sender: "Mom", subject: "Dinner tomorrow?", content: "Are you free for dinner tomorrow night? Let me know!", status: "unread", date: "Just now", logoUrl: null },
        { id: 2, category: "inbox", sender: "Alex Smith", subject: "Project Update - Meeting Agenda", content: "Attached is the revised agenda for our project kickoff meeting on Friday.", status: "read", date: "1 hour ago", logoUrl: null },
        { id: 3, category: "inbox", sender: "Fitness Club", subject: "Your subscription renewal is due", content: "Please update your payment information to continue accessing our facilities.", status: "read", date: "Yesterday", logoUrl: null },
        // Promotions (Simulated Hidden/Promotional)
        { id: 4, category: "promotions", sender: "Netflix", subject: "New Shows You'll Love", content: "Check out the latest releases and binge-watch all weekend! Click now to explore.", status: "unread", date: "4 hours ago", logoUrl: null },
        { id: 5, category: "promotions", sender: "Spotify", subject: "Your 2025 Wrapped is here!", content: "See your top songs and artists from the past year. Relive your musical journey.", status: "read", date: "1 week ago", logoUrl: null },

        // Spam (Branded & Aggressive - Focus on Exclusive Testing/Samples, NO FEES)
        { id: 10, category: "spam", sender: "Nike Exclusive VIP", subject: "TEST THE NEW AIR MAX EXCLUSIVE ACCESS!", brand: "Nike", content: "You've been specially selected to test our unreleased Air Max shoes before anyone else. Receive your pair at **absolutely no cost** for testing. Limited time offer! This is a one-in-a-million opportunity to get authentic Nike gear, don't miss out on this incredible chance to join the exclusive tester club!", status: "unread", date: "Today", logoUrl: "https://placehold.co/40x40/000000/ffffff?text=NIKE" },
        // Змінений текст для Victoria's Secret: фокус на впізнаваності та якості продукту, без згадки про ціну.
        { id: 11, category: "spam", sender: "Victoria's Secret Angel Program", subject: "Exclusive Trial: Test Our New Products Line!", brand: "Victoria's Secret", content: "To enhance brand awareness and product quality, we are offering an exclusive, private trial of our newest comfort line. We rely on top-tier feedback to perfect our designs. Claim your sample collection **at no charge** and help us define the future of fashion. Your expert review is required!", status: "unread", date: "5 days ago", logoUrl: "https://placehold.co/40x40/ee4c8a/ffffff?text=VS" },
        { id: 12, category: "spam", sender: "Lego Master Builder Inc.", subject: "Exclusive Rare Millennium Falcon Set!", brand: "Lego", content: "Congratulations! You won the random draw for a retired, rare Millennium Falcon set. The retail value is over $800, but it's yours **for the simple task of providing feedback**.", status: "unread", date: "1 week ago", logoUrl: "https://placehold.co/40x40/ff0000/ffffff?text=LEGO" },
        { id: 13, category: "spam", sender: "Amazon Secret Reviewers", subject: "Exclusive Prime Member Perk: $500 Gift Card for Product Review!", brand: "Amazon", content: "As a valued Prime member, you've earned a $500 reward for participating in an exclusive product review panel. Claim your digital gift card now by confirming your details. Limited time offer to influence our next product line!", status: "read", date: "1 day ago", logoUrl: "https://placehold.co/40x40/ff9900/000000?text=AMZN" },
        { id: 14, category: "spam", sender: "Tesla Investor Relations", subject: "Pre-IPO Share Opportunity - Exclusive", brand: "Tesla", content: "A very limited, pre-public offering of new Tesla shares is available only to you. Invest now before the stock soars! This chance to get in early on the next big thing is extremely time sensitive. Do not share this link.", status: "read", date: "3 hours ago", logoUrl: "https://placehold.co/40x40/cc0000/ffffff?text=TSLA" },
        // Apple (iPhone 17) moved to the 6th position in the spam list
        { id: 17, category: "spam", sender: "Apple Elite Testers Program", subject: "Exclusive Invitation: Test the Unreleased iPhone 17!", brand: "Apple", content: "Congratulations! You have been selected as an esteemed customer to participate in a confidential, pre-launch trial of the new **iPhone 17**. Provide your shipping details and **receive a unit at no cost** for its final testing. Your feedback is invaluable for its final development. Limited slots available—claim your experience now!", status: "unread", date: "45 minutes ago", logoUrl: "https://placehold.co/40x40/5e5e5e/ffffff?text=AAPL" },
        { id: 15, category: "spam", sender: "Rolex Watch Club", subject: "CONGRATULATIONS! You won a Rolex!", brand: "Rolex", content: "You have won a brand new, genuine Rolex Submariner. Just confirm your details and **the watch is secured by us** to receive it. Don't let this incredible opportunity pass you by!", status: "read", date: "2 days ago", logoUrl: "https://placehold.co/40x40/006341/ffffff?text=RLX" },
        { id: 16, category: "spam", sender: "Starbucks Coffee Rewards", subject: "Limited Edition GOLD CARD FOR LIFE!", brand: "Starbucks", content: "We are giving away 100 Gold Cards that grant you limited-edition coffee for life! Click the link and enter your basic information to qualify immediately.", status: "unread", date: "6 hours ago", logoUrl: "https://placehold.co/40x40/00704A/ffffff?text=SBX" },
    ];

    // DOM Elements
    const appContainer = document.getElementById('app-container');
    const headerTitle = document.getElementById('header-title');
    const backButton = document.getElementById('back-button');
    const inboxView = document.getElementById('inbox-view');
    const detailView = document.getElementById('detail-view');
    const detailSubject = document.getElementById('detail-subject');
    const detailSender = document.getElementById('detail-sender');
    const detailContent = document.getElementById('detail-content');
    const ctaSection = document.getElementById('cta-section');
    const ctaButton = document.getElementById('cta-button');
    const modalOverlay = document.getElementById('modal-overlay');
    const modalContent = document.getElementById('modal-content');
    const detailLogo = document.getElementById('detail-logo');

    // Function to set the current tab and render the inbox
    function setCurrentTab(tab) {
        currentTab = tab;
        renderInbox();
        // Update header title based on tab
        const unreadCount = allEmails.filter(e => e.category === tab && e.status === 'unread').length;
        headerTitle.textContent = tab.charAt(0).toUpperCase() + tab.slice(1) + (unreadCount > 0 ? ` (${unreadCount})` : '');
    }

    // Function to render the list of emails based on the current tab
    function renderInbox() {
        currentView = 'inbox';
        detailView.classList.add('hidden');
        inboxView.classList.remove('hidden');
        backButton.classList.add('hidden');
        ctaSection.classList.add('hidden'); // Hide CTA section in inbox view

        // Update tab styling
        document.querySelectorAll('.tab-button').forEach(button => {
            button.classList.remove('tab-active');
            if (button.getAttribute('data-tab') === currentTab) {
                button.classList.add('tab-active');
            }
        });

        // Filter emails for the current tab
        let filteredEmails;
        if (currentTab === 'inbox') {
            filteredEmails = allEmails.filter(e => e.category === 'inbox' || e.category === 'promotions');
        } else {
            filteredEmails = allEmails.filter(e => e.category === currentTab);
        }

        // Render email items
        inboxView.innerHTML = '';
        if (filteredEmails.length === 0) {
            inboxView.innerHTML = `<p class="p-8 text-center text-gray-500">No messages in this tab.</p>`;
            return;
        }

        filteredEmails.forEach(email => {
            const isUnread = email.status === 'unread';
            const item = document.createElement('div');
            // Updated classes for a card-like look in the list
            item.className = `email-item p-4 flex bg-white ${isUnread ? 'bg-amber-50 unread-item' : ''}`;

            item.onclick = () => {
                // Only allow navigating into detail view for 'spam' emails
                if (email.category === 'spam') {
                    renderDetail(email.id);
                } else {
                    // Simulate opening but without detail view transition
                    showSuccessMessage("This is a functional email. No suspicious activity found.", "Info");
                    if (isUnread) {
                        email.status = 'read';
                        renderInbox(); // Rerender to update the list and counter
                    }
                }
            };

            const subjectClass = isUnread ? 'font-bold text-gray-800' : 'font-semibold text-gray-800';
            const senderClass = isUnread ? 'font-bold text-orange-700' : 'font-medium text-gray-600';
            
            // Determine Logo/Avatar
            const isBrandedSpam = !!email.logoUrl;
            const logoHtml = isBrandedSpam
                ? `<img src="${email.logoUrl}" alt="${email.brand} Logo" class="w-10 h-10 rounded-full mr-3 object-cover shadow-md sender-avatar" onerror="this.onerror=null;this.src='https://placehold.co/40x40/a1a1aa/ffffff?text=?'">`
                : `<div class="w-10 h-10 rounded-full mr-3 flex items-center justify-center bg-indigo-500 text-white font-semibold text-lg shadow-md sender-avatar">${email.sender.charAt(0)}</div>`;

            item.innerHTML = `
                ${logoHtml}
                <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start mb-1">
                        <p class="${senderClass} text-sm truncate">${email.sender}</p>
                        <p class="text-xs text-gray-400 ml-2">${email.date}</p>
                    </div>
                    <p class="${subjectClass} text-base truncate mb-1">${email.subject}</p>
                    <p class="text-sm text-gray-500 truncate">${email.content.substring(0, 80)}...</p>
                </div>
            `;
            inboxView.appendChild(item);
        });
    }

    // Function to render the email detail view (only for spam)
    function renderDetail(emailId) {
        const email = allEmails.find(e => e.id === emailId);
        if (!email || email.category !== 'spam') return setCurrentTab('spam'); // Safety check

        currentView = 'detail';
        selectedEmailId = emailId;

        // UI Updates
        headerTitle.textContent = email.subject.length > 25 ? email.subject.substring(0, 22) + '...' : email.subject;
        backButton.classList.remove('hidden');
        inboxView.classList.add('hidden');
        detailView.classList.remove('hidden');
        ctaSection.classList.remove('hidden');
        
        detailSubject.textContent = email.subject;
        detailSender.textContent = `${email.sender} (${email.brand})`;
        detailContent.innerHTML = `<p>${email.content.replace(/\n/g, '<br>')}</p>`;

        // Update logo in detail view
        detailLogo.src = email.logoUrl || 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='; // Use transparent pixel fallback if no logo
        detailLogo.alt = `${email.brand || 'Sender'} Logo`;


        // Reset CTA button state
        ctaButton.disabled = false;
        ctaButton.textContent = 'Claim Your Sample!';

        // Mark as read
        if (email.status === 'unread') {
            email.status = 'read';
            setCurrentTab(currentTab); // Re-render to update the counter
        }
    }

    // Handler for the "Claim Offer" button (shows the form)
    function claimOffer() {
        const email = allEmails.find(e => e.id === selectedEmailId);
        if (!email) return;

        // Disable CTA button and change text
        ctaButton.disabled = true;
        ctaButton.textContent = 'Proceeding to Checkout...';

        // Load the delivery form into the modal
        modalContent.innerHTML = `
            <h3 class="text-2xl font-extrabold text-red-600 mb-4">Complete Delivery Information</h3>
            <p class="text-gray-600 mb-6">To receive your exclusive ${email.brand} item, please confirm your delivery address. Hurry, time is limited!</p>
            <form onsubmit="submitDeliveryForm(event)">
                <input type="text" id="deliveryName" placeholder="Full Name (required)" required class="input-field">
                <input type="email" id="deliveryEmail" placeholder="Email Address (required)" required class="input-field">
                <input type="text" id="deliveryAddress" placeholder="Shipping Address (required)" required class="input-field">
                <div class="flex space-x-2">
                    <input type="text" id="deliveryCity" placeholder="City" class="input-field w-1/2">
                    <input type="text" id="deliveryZip" placeholder="ZIP Code" class="input-field w-1/2">
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-indigo-700 transition duration-200 uppercase tracking-wider mt-4">
                    Confirm Delivery
                </button>
            </form>
            <button class="text-sm text-gray-500 mt-4 hover:text-gray-700" onclick="closeModal()">Cancel</button>
        `;
        modalOverlay.classList.remove('hidden');
    }

    // Handler for the form submission
    function submitDeliveryForm(event) {
        event.preventDefault(); // Prevent actual form submission

        const email = allEmails.find(e => e.id === selectedEmailId);
        if (!email) return;

        // Simulate data validation (simple check for required fields)
        const name = document.getElementById('deliveryName').value;
        const address = document.getElementById('deliveryAddress').value;

        if (name && address) {
            // Show the success message
            showSuccessMessage(`Your details for the ${email.brand} product have been secured! Expect a confirmation (and possibly a charge) shortly.`, "Delivery Confirmed!");
        } else {
            // Basic error handling
             showSuccessMessage(`Please fill in all required fields.`, "Error", 'bg-red-600');
        }
    }

    // Function to show a generic success/info message (replaces the old messageBox logic)
    function showSuccessMessage(text, title, buttonColorClass = 'bg-indigo-600') {
        modalContent.innerHTML = `
            <h3 class="text-3xl font-extrabold text-green-600 mb-3">${title}</h3>
            <p id="message-text" class="text-gray-700 mb-6">${text}</p>
            <button class="${buttonColorClass} text-white font-semibold py-2 px-6 rounded-xl hover:opacity-90 transition" onclick="closeModal()">
                Got It
            </button>
        `;
        modalOverlay.classList.remove('hidden');
    }
    
    // Function to close the modal
    function closeModal() {
        modalOverlay.classList.add('hidden');
        
        // Reset CTA button state on modal close if the form wasn't confirmed
        const email = allEmails.find(e => e.id === selectedEmailId);
        if (email && ctaButton.disabled) {
            ctaButton.disabled = false;
            ctaButton.textContent = 'Claim Your Sample!';
        }
    }

    // Back button handler
    backButton.addEventListener('click', () => {
        if (currentView === 'detail') {
            renderInbox();
        }
    });

    // Initialization
    window.onload = () => {
        // Set dynamic min-height for mobile view
        appContainer.style.minHeight = window.innerHeight + 'px';
        window.addEventListener('resize', () => {
            appContainer.style.minHeight = window.innerHeight + 'px';
        });

        setCurrentTab('spam'); // Start on the spam tab
        
        // Expose global functions
        window.setCurrentTab = setCurrentTab;
        window.claimOffer = claimOffer;
        window.submitDeliveryForm = submitDeliveryForm; // Must be global for inline form submission
        window.closeModal = closeModal;
        window.showSuccessMessage = showSuccessMessage; // Expose for non-spam mail clicks
    };

</script>

</body>
</html>
